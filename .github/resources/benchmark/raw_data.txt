Intel(R) Xeon(R) Gold 5118 CPU @ 2.30GHz
Linux 5.15.4-arch1-1 #1 SMP PREEMPT Sun, 21 Nov 2021 21:34:33 +0000 x86_64 GNU/Linux
rust nightly-2021-11-26

=== Test without QPS limit ===
Not fix cpu freq
client-nCore * client-conn-per-core	real-QPS, latency

Tokio Server 1C(1K):
4C * 80		136003, 2351.036 us
4C * 90		151575, 2370.472 us
4C * 100	166938, 2384.381 us
4C * 110	183293, 2402.846 us
4C * 120	193533, 2463.862 us
4C * 130	193845, 2679.795 us
4C * 140	190892, 2923.508 us
4C * 150	189423, 3194.417 us
4C * 160	187723, 3404.645 us
4C * 170	186446, 3626.770 us

Glommio Server 1C(1K):
4C * 80		134051, 2408.433 us
4C * 90		150028, 2421.164 us
4C * 100	159108, 2521.306 us
4C * 110	156743, 2811.269 us
4C * 120	156263, 3076.416 us
4C * 130	156560, 3329.711 us
4C * 140	156336, 3593.082 us
4C * 150	156228, 3843.876 us
4C * 160	156095, 4094.035 us
4C * 170	156098, 4358.384 us

Monoio Server 1C(1K):
4C * 80		134243, 2414.480 us
4C * 90		148679, 2440.638 us
4C * 100	160157, 2489.107 us
4C * 110	172929, 2531.478 us
4C * 120	190056, 2523.273 us
4C * 130	208272, 2494.789 us
4C * 140	223168, 2506.541 us
4C * 150	221444, 2706.702 us
4C * 160	218167, 2937.843 us
4C * 170	214008, 3173.025 us

Tokio Server 4C(1K):
16C * 80	425876, 3038.685 us
16C * 90	434565, 3342.040 us
16C * 100	433536, 3708.959 us
16C * 110	429207, 4108.272 us
16C * 120	426299, 4515.546 us
16C * 130	424340, 4896.002 us
16C * 140	424266, 5289.940 us
16C * 150	422557, 5693.039 us
16C * 160	421392, 6009.255 us
16C * 170	419988, 6479.907 us

Glommio Server 4C(1K):
16C * 80	532382, 2436.556 us
16C * 90	584678, 2469.457 us
16C * 100	603016, 2669.160 us
16C * 110	598028, 2959.762 us
16C * 120	587016, 3297.458 us
16C * 130	583336, 3583.728 us
16C * 140	575186, 3946.746 us
16C * 150	572048, 4208.824 us
16C * 160	566927, 4533.515 us
16C * 170	560780, 4935.862 us

Monoio Server 4C(1K):
16C * 80	542118, 2378.823 us
16C * 90	603551, 2390.756 us
16C * 100	664236, 2414.711 us
16C * 110	720109, 2459.972 us
16C * 120	773882, 2483.420 us
16C * 130	810075, 2574.664 us
16C * 140	800616, 2806.509 us
16C * 150	775577, 3132.229 us
16C * 160	759304, 3389.534 us
16C * 170	746435, 3663.855 us


Tokio Server 8C(100B):
32C * 50	575072, 2807.995 us
32C * 60	654740, 2972.980 us
32C * 70	705802, 3165.855 us
32C * 80	765419, 3332.784 us
32C * 90	778269, 3710.561 us
32C * 100	776744, 4134.435 us
32C * 110	773496, 4575.554 us
32C * 120	762310, 5042.572 us
32C * 130	745511, 5600.781 us
32C * 140	732782, 6098.688 us
32C * 150	719761, 6708.374 us

Glommio Server 8C(100B):
32C * 50	699452, 2292.974 us
32C * 60	827159, 2320.781 us
32C * 70	943712, 2376.175 us
32C * 80	1048476, 2443.946 us
32C * 90	1120223, 2573.293 us
32C * 100	1139912, 2828.380 us
32C * 110	1102576, 3184.626 us
32C * 120	1097359, 3514.853 us
32C * 130	1067719, 3888.087 us
32C * 140	1053725, 4291.814 us
32C * 150	1024338, 4703.958 us

Monoio Server 8C(100B):
32C * 50	700395, 2292.132 us
32C * 60	832436, 2306.992 us
32C * 70	960387, 2336.635 us
32C * 80	1091909, 2348.349 us
32C * 90	1202169, 2393.557 us
32C * 100	1307065, 2455.946 us
32C * 110	1409866, 2506.755 us
32C * 120	1511449, 2547.601 us
32C * 130	1598373, 2606.653 us
32C * 140	1595249, 2881.124 us
32C * 150	1511822, 3192.643 us

Tokio Server 16C(100B):
64C * 50	857401, 3758.325 us
64C * 60	909855,	4257.394 us
64C * 70	917419, 4890.954 us
64C * 80	907222, 5678.144 us
64C * 90	878233, 6590.804 us
64C * 100	858429, 7462.695 us
64C * 110	837795, 8425.169 us
64C * 120	821421, 9325.018 us
64C * 130	798722, 10297.923 us
64C * 140	789259, 11294.288 us
64C * 150	777185, 12244.062 us

Glommio Server 16C(100B):
64C * 50	1375887, 2350.523 us
64C * 60	1637238, 2362.871 us
64C * 70	1886590, 2401.022 us
64C * 80	2075231, 2477.238 us
64C * 90	2045086, 2843.827 us
64C * 100	1948567, 3307.062 us
64C * 110	1893463, 3745.081 us
64C * 120	1866898, 4130.354 us
64C * 130	1794545, 4668.819 us
64C * 140	1702257, 5374.390 us
64C * 150	1648142, 5937.386 us

Monoio Server 16C(100B):
64C * 50	1381009, 2328.832 us
64C * 60	1651275, 2326.258 us
64C * 70	1921773, 2339.399 us
64C * 80	2180131, 2354.979 us
64C * 90	2415593, 2389.552 us
64C * 100	2628452, 2447.453 us
64C * 110	2802033, 2527.093 us
64C * 120	2763803, 2793.228 us
64C * 130	2500377, 3345.023 us
64C * 140	2312680, 4012.108 us
64C * 150	2171531, 4450.459 us

=== Test without QPS limit ===
100B Best QPS
Tokio Server
1C	205726	4*130
2C	228719	8*90
4C	430921	16*90
8C	774526	32*90
12C	892601	48*90
16C	908179	64*70
20C	835983	80*60

Glommio Server
1C	163709	4*100
2C	317929	8*100
4C	616687	16*100
8C	1116116	32*90
12C	1616305	48*90
16C	2064589	64*80
20C	2441936	80*80

Monoio Server
1C	232888	4*150
2C	442257	8*150
4C	868525	16*140
8C	1588528	32*130
12C	2194588	48*120
16C	2764152	64*110
20C	3232227	80*100

=== Test with QPS limit ===
Fixed 3200MHz
client-nCore * client-QPS-limit-per-core	real-QPS, latency, cpu(user+kern) cpu(user)

Tokio Server 1C(1K, 250Conn/Core):
4C * 10000	40000, 5591.914 us, 22.7%
4C * 15000	60000, 5601.615 us, 35.5%
4C * 20000	80000, 5576.581 us, 45.3%
4C * 30000	120000, 5627.628 us 66.4%
4C * 40000	160000, 5595.928 us, 89.0%
4C * 50000	179992, 5563.417 us, 100.0%
4C * 60000	179833, 5568.437 us, 100.0%

Glommio Server 1C(1K, 250Conn/Core):
4C * 10000	40000, 6729.581 us, 28.9% 21.0%
4C * 15000	60000, 6784.777 us, 41.7% 32.8%
4C * 20000	80000, 6683.958 us, 55.6% 41.3%
4C * 30000	120000, 6726.486 us, 81.3% 62.4%
4C * 40000	151125, 6631.980 us, 100.0% 77.5%
4C * 50000	150802, 6640.541 us, 100.0% 77.5%
4C * 60000	151019, 6641.687 us, 100.0% 77.5%

Monoio Server 1C(1K, 250Conn/Core):
4C * 10000	40000, 5080.813 us, 21.4% 13.8%
4C * 15000	60000, 4954.242 us, 31.2% 20.4%
4C * 20000	80000, 4899.854 us, 40.5% 26.3%
4C * 30000	120000, 4938.838 us, 58.7% 40.9%
4C * 40000	160000, 4911.684 us, 78.1% 55.2%
4C * 50000	200000, 4873.549 us, 97.4% 68.3%
4C * 60000	210040, 4769.984 us, 100.0% 69.6%

Tokio Server 1C(1K, 80Conn/Core):
4C * 4000	16000, 2553.993 us, 8.7% 6.6%
4C * 8000	32000, 2492.989 us, 18.4% 11.8%
4C * 12000	48000, 2426.594 us, 28.7% 18.4%
4C * 24000	96000, 2385.761 us, 53.5% 36.2%

Glommio Server 1C(1K, 80Conn/Core):
4C * 4000	16000, 2770.602 us, 13.0% 8.5%
4C * 8000	32000, 2503.301 us, 21.9% 17.1%
4C * 12000	48000, 2503.463 us, 34.6% 25.6%
4C * 24000	96000, 2447.956 us, 62.1% 49.3%

Monoio Server 1C(1K, 80Conn/Core):
4C * 4000	16000, 2856.069 us, 7.3% 5.3%
4C * 8000	32000, 2678.679 us, 17.5% 9.8%
4C * 12000	48000, 2657.190 us, 24.5% 14.1%
4C * 24000	96000, 2569.204 us, 46.9% 28.9%

Tokio Server 4C(1K, 80Conn/Core):
16C * 4000	64000, 3108.518 us, 63.6% 45.9%
16C * 8000	128000, 2991.660 us, 126.4% 87.2%
16C * 12000	192000, 3048.355 us, 186.7% 127.6%
16C * 24000	384000, 3059.898 us, 366.0% 253.2%
16C * 30000	423771, 3042.862 us, 397.2% 275.4%

Glommio Server 4C(1K, 80Conn/Core):
16C * 4000	64000, 2618.117 us, 57.4% 40.0%
16C * 8000	128000, 2518.648 us, 97.5% 75.1%
16C * 12000	192000, 2470.847 us, 153.6% 107.2%
16C * 24000	384000, 2447.933 us, 276.8% 205.6%
16C * 30000	480000, 2444.302 us, 346.9% 253.7%

Monoio Server 4C(1K, 80Conn/Core):
16C * 4000	64000, 2568.320 us, 44.0% 19.6%
16C * 8000	128000, 2413.699 us, 63.4% 38.0%
16C * 12000	192000, 2433.475 us, 102.8% 57.7%
16C * 24000	384000, 2402.014 us, 197.6% 108.3%
16C * 30000	480000, 2374.121 us, 238.0% 136.7%

Note: Now the network becomes unstable...
The latency may not accurate.

Tokio Server 4C(1K, 250Conn/Core):
16C * 4000	64000, 7693.716 us, 76.8% 45.8%
16C * 8000	128000, 7659.362 us, 139.6% 93.8%
16C * 12000	192000, 8735.068 us, 206.4% 132.4%
16C * 24000	384000, 9470.760 us, 389.6% 262.3%
16C * 30000	408762, 9660.448 us, 400.0% 271.7%
16C * 36000	405683, 9757.203 us, 400.0% 269.0%
16C * 42000	407282, 9701.064 us, 400.0% 270.3%
16C * 48000	407390, 9732.485 us, 400.0% 271.4%

Glommio Server 4C(1K, 250Conn/Core):
16C * 4000	64000, 6427.255 us, 76.0% 41.4%
16C * 8000	128000, 6998.976 us, 115.6% 81.3%
16C * 12000	192000, 6882.476 us, 165.6% 119.0%
16C * 24000	384000, 6166.229 us, 321.6% 239.3%
16C * 30000	480000, 7648.308 us, 379.2% 285.4%
16C * 36000	517942, 7737.454 us, 400.0% 301.8%
16C * 42000	518723, 7740.495 us, 400.0% 302.2%
16C * 48000	518476, 7727.184 us, 400.0% 302.2%

Monoio Server 4C(1K, 250Conn/Core):
16C * 4000	64000, 5454.704 us, 45.2% 25.6%
16C * 8000	128000, 4961.520 us, 83.6% 50.4%
16C * 12000	192000, 5187.571 us, 121.2% 74.1%
16C * 24000	384000, 4875.903 us, 232.0% 144.8%
16C * 30000	480000, 5340.389 us, 284.0% 185.9%
16C * 36000	576000, 5386.970 us, 328.7% 218.0%
16C * 42000	672000, 5599.702 us, 381.2% 255.6%
16C * 48000	748210, 5369.850 us, 400.0% 265.7%
